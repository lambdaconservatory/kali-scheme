dnl Process this file with autoconf to produce a configure script.
AC_INIT(scheme48vm.c)
     AC_CONFIG_HEADER(sysdep.h)
     AC_PROG_CC
     AC_PROG_INSTALL
     AC_HAVE_LIBRARY(m, [LIBS="$LIBS -lm"])
     AC_HAVE_LIBRARY(dl, [LIBS="$LIBS -ldl"])
     AC_HAVE_LIBRARY(mld, [LIBS="$LIBS -lmld"])
     AC_HAVE_LIBRARY(nsl, [LIBS="$LIBS -lnsl"])
     AC_HAVE_LIBRARY(gen, [LIBS="$LIBS -lgen"])
     AC_HAVE_LIBRARY(socket, [LIBS="$LIBS -lsocket"])
     AC_CONST
     AC_HAVE_HEADERS(libgen.h sys/timeb.h)
     AC_HAVE_FUNCS(gettimeofday dlopen socket)
     AC_COMPILE_CHECK([n_name], [#include <nlist.h>], 
				[struct nlist name_list;
				 name_list.n_name = "foo";],
				AC_DEFINE(NLIST_HAS_N_NAME))
     AC_COMPILE_CHECK([_cnt], [#include <stdio.h>], 
			      [FILE *foo;
			       return foo->_cnt;],
			      AC_DEFINE(FILE_HAS__CNT))
     dnl We might want AC_WORDS_BIGENDIAN in the future.
     dnl We might want AC_CHAR_UNSIGNED in the future.
     AC_SUBST(CFLAGS)
     if test "z$CFLAGS" = "z"
       then if test "z$GCC" = "z"
         then CFLAGS="-O"
         else CFLAGS="-O2 -g"; fi; fi
AC_OUTPUT(Makefile)
